(function(){"use strict";var t={1634:function(t,e,n){var i=n(6369),a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("music-player")],1)},s=[],o=function(){var t=this,e=t._self._c;return e("fragment",[e("div",{ref:"bg",staticClass:"canvas-bg"},[e("div",{staticClass:"player",attrs:{canPlay:String(t.canPlay)},on:{click:t.handlePlayerClick}},[e("i",{staticClass:"play fa fa-play"})])]),e("canvas",{ref:"music",staticClass:"canvas-music"})])},r=[],l={name:"music-player",data(){return{azusa:null,canPlay:!1,firstPlay:!0,playLock:!1,delayTime:Object.freeze(600)}},mounted(){const t=this.$refs.music,e=this.$refs.bg;this.azusa=new window.Azusa({view:t,subdivisionSize:1024,cutEnd:256}),e.style.backgroundImage=`url(${n(2865)})`,this.azusa.audio.load({src:n(3597),onPrgress:t=>{const e=100*(t.loaded/t.total).toFixed(4);console.log(`--- 已加载 ${t.loaded}(${e}%) 总大小 ${t.total}`),100===e&&(this.canPlay=!0,console.log("音乐文件已加载完成, 可以点击播放..."))}}),this.azusa.audio.setVolume(1),window.addEventListener("resize",this.handleWindowResize)},destroyed(){window.removeEventListener("resize",this.handleWindowResize)},methods:{handleWindowResize(){this.azusa.resize(document.documentElement.clientWidth,document.documentElement.clientHeight)},handlePlayerClick(t){if(this.playLock)return console.log("请勿点击过快");if(!this.canPlay)return console.log("资源还没准备好, 请在加载完毕后播放");this.playLock=!0;const e=t.target;Array.from(e.classList).includes("fa-play")?(this.firstPlay?setTimeout((()=>{this.azusa.audio.play(),this.firstPlay=!1,this.playLock=!1}),this.delayTime):(this.azusa.audio.play(),this.playLock=!1),e.classList.add("fa-pause"),e.classList.remove("fa-play")):(this.azusa.audio.stop(),this.playLock=!1,e.classList.add("fa-play"),e.classList.remove("fa-pause"))}}},u=l,c=n(1001),f=(0,c.Z)(u,o,r,!1,null,"b4dcd848",null),d=f.exports,p={name:"App",components:{MusicPlayer:d}},h=p,y=(0,c.Z)(h,a,s,!1,null,null,null),m=y.exports,v=n(6899);i.ZP.config.productionTip=!1,i.ZP.use(v.ZP.Plugin),new i.ZP({render:t=>t(m)}).$mount("#app")},3597:function(t,e,n){t.exports=n.p+"media/bg.2a7fc193.mp3"},2865:function(t,e,n){t.exports=n.p+"img/bg2.371155e7.jpg"}},e={};function n(i){var a=e[i];if(void 0!==a)return a.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,n),s.exports}n.m=t,function(){var t=[];n.O=function(e,i,a,s){if(!i){var o=1/0;for(c=0;c<t.length;c++){i=t[c][0],a=t[c][1],s=t[c][2];for(var r=!0,l=0;l<i.length;l++)(!1&s||o>=s)&&Object.keys(n.O).every((function(t){return n.O[t](i[l])}))?i.splice(l--,1):(r=!1,s<o&&(o=s));if(r){t.splice(c--,1);var u=a();void 0!==u&&(e=u)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[i,a,s]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.p=""}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var a,s,o=i[0],r=i[1],l=i[2],u=0;if(o.some((function(e){return 0!==t[e]}))){for(a in r)n.o(r,a)&&(n.m[a]=r[a]);if(l)var c=l(n)}for(e&&e(i);u<o.length;u++)s=o[u],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(c)},i=self["webpackChunkmusic_player"]=self["webpackChunkmusic_player"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(1634)}));i=n.O(i)})();
//# sourceMappingURL=app.b9bf71c7.js.map